<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paty - El juego de las palabras prohibidas</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <!-- Header con timer y pausa -->
        <div class="header">
            <div class="timer-container">
                <div class="timer-display" id="timer">--:--</div>
                <button class="btn-pause" id="pause-btn" title="Pausa (Espacio)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Pantalla inicial -->
        <div class="initial-screen" id="initial-screen">
            <div class="title-container">
                <img src="images/logo.png" alt="Taboup Logo" class="game-logo">
                <div class="title">Paty</div>
                <div class="subtitle">El juego de las palabras prohibidas</div>
            </div>
            <div class="start-buttons">
                <button class="btn btn-primary" id="start-60">
                    <div class="btn-content">
                        <div class="btn-title">NUEVA RONDA</div>
                        <div class="btn-subtitle">60 segundos</div>
                    </div>
                </button>
                <button class="btn btn-secondary" id="start-120">
                    <div class="btn-content">
                        <div class="btn-title">‚è±Ô∏è RONDA LARGA</div>
                        <div class="btn-subtitle">120 segundos</div>
                    </div>
                </button>
            </div>
            <div class="extra-buttons">
                <button class="btn btn-info" id="show-map">
                    <div class="btn-content">
                        <div class="btn-title">üó∫Ô∏è VER MAPA</div>
                        <div class="btn-subtitle">Tablero de juego</div>
                    </div>
                </button>
                <button class="btn btn-info" id="show-rules">
                    <div class="btn-content">
                        <div class="btn-title">üìã REGLAS</div>
                        <div class="btn-subtitle">C√≥mo jugar</div>
                    </div>
                </button>
            </div>
        </div>

        <!-- √Årea de juego -->
        <div class="game-area" id="game-area">
            <!-- Layout para desktop: cartas descartadas a la izquierda -->
            <div class="discarded-area desktop-only">
                <div class="discarded-title">Cartas jugadas</div>
                <div class="discarded-cards" id="discarded-cards-desktop"></div>
            </div>

            <!-- √Årea principal de juego -->
            <div class="main-game-area">
                <!-- Cartas descartadas para m√≥vil: entre timer y carta principal -->
                <div class="discarded-area mobile-only">
                    <div class="discarded-title">Cartas jugadas</div>
                    <div class="discarded-cards horizontal" id="discarded-cards-mobile"></div>
                </div>

                <!-- Carta central y controles -->
                <div class="card-game-section">
                    <!-- Carta actual -->
                    <div class="card-container">
                        <div class="card-deck">
                            <div class="card card-shadow"></div>
                            <div class="card card-shadow" id="next-card"></div>
                            <div class="card card-current" id="current-card">
                                <div class="card-word" id="card-word">Cargando...</div>
                                <div class="card-separator"></div>
                                <div class="card-forbidden-list" id="card-forbidden"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Controles del juego -->
                    <div class="game-controls">
                        <button class="control-btn error-btn" id="error-btn" title="Error (X)">
                            <div class="btn-icon">‚úï</div>
                            <div class="btn-text">ERROR</div>
                        </button>
                        <button class="control-btn correct-btn" id="correct-btn" title="Correcto (C)">
                            <div class="btn-icon">‚úì</div>
                            <div class="btn-text">CORRECTO</div>
                        </button>
                        <button class="control-btn pass-btn" id="pass-btn" title="Pasar (P)">
                            <div class="btn-icon">‚Üí</div>
                            <div class="btn-text">PASAR</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pantalla de revisi√≥n -->
        <div class="review-area" id="review-area">
            <div class="review-container">
                <div class="review-header">
                    <div class="review-title" id="review-title">¬°RONDA TERMINADA!</div>
                </div>
                
                <!-- Botones reorganizados -->
                <div class="review-buttons">
                    <button class="btn btn-primary" id="new-round-60">
                        <div class="btn-content">
                            <div class="btn-title">üÜï NUEVA RONDA</div>
                            <div class="btn-subtitle">60 segundos</div>
                        </div>
                    </button>
                    <button class="btn btn-secondary" id="new-round-120">
                        <div class="btn-content">
                            <div class="btn-title">‚è±Ô∏è RONDA LARGA</div>
                            <div class="btn-subtitle">120 segundos</div>
                        </div>
                    </button>
                   <button class="btn btn-secondary" onclick="location.reload()">
                        <div class="btn-content">
                            <div class="btn-title">INICIO</div>
                            <div class="btn-subtitle">__</div>
                        </div>
                    </button>

                </div>
                
                <div class="review-content">
                    <div class="review-summary" id="review-summary"></div>
                </div>
            </div>
        </div>

        <!-- Pantalla de mapa -->
        <div class="map-screen" id="map-screen">
            <div class="map-container">
                <div class="map-header">
                    <div class="map-title">üó∫Ô∏è MAPA DEL JUEGO</div>
                    <button class="btn-close" id="close-map">‚úï</button>
                </div>
                <div class="map-content">
                    <img src="images/tablero_Taboup.png" alt="Tablero Taboup" class="map-image">
                    <div class="map-download">
                        <button class="download-btn" id="download-map-btn">
                            üíæ DESCARGAR MAPA
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pantalla de reglas -->
        <div class="rules-screen" id="rules-screen">
            <div class="rules-container">
                <div class="rules-header">
                    <div class="rules-title">üìã REGLAS DEL JUEGO</div>
                    <button class="btn-close" id="close-rules">‚úï</button>
                </div>
                <div class="rules-content">
                    <!-- Objetivo -->
                    <div class="rule-section">
                        <h3>üéØ OBJETIVO DEL JUEGO</h3>
                        <p><strong>Taboup</strong> es un party game por equipos inspirado en el cl√°sico <em>Tab√∫</em>. Haz que tu equipo adivine la <strong>palabra objetivo</strong> sin usar las <strong>palabras prohibidas</strong> ni infringir las reglas. Avanza en el tablero y s√© el primero en llegar a la meta.</p>
                    </div>

                    <!-- Equipos y disposici√≥n -->
                    <div class="rule-section">
                        <h3>üë• EQUIPOS Y DISPOSICI√ìN</h3>
                        <p><strong>‚Ä¢ Dos equipos:</strong> Equipo A y Equipo B</p>
                        <p><strong>‚Ä¢ Jugadores:</strong> Recomendado n√∫mero par (4, 6, 8...)</p>
                        <p><strong>‚Ä¢ Disposici√≥n:</strong> Sentados en c√≠rculo alternando equipos</p>
                        <div class="example-box">
                            <strong>Ejemplo con 6 jugadores:</strong><br>
                            A1 - B1 - A2 - B2 - A3 - B3
                        </div>
                        <p><em>Las personas a tu izquierda y derecha nunca son de tu equipo, actuando como <strong>√°rbitros laterales</strong>.</em></p>
                    </div>

                    <!-- Turnos -->
                    <div class="rule-section">
                        <h3>üîÅ TURNOS Y ROTACI√ìN</h3>
                        <p><strong>‚Ä¢ Rotaci√≥n:</strong> El m√≥vil/plataforma rota siempre en <strong>sentido anti-horario</strong></p>
                        <p><strong>‚Ä¢ Orden:</strong> Despu√©s de ti, juega la persona a tu <strong>derecha</strong></p>
                        <p><strong>‚Ä¢ Alternancia:</strong> Los equipos se alternan autom√°ticamente (A-B-A-B...)</p>
                    </div>

                    <!-- Roles -->
                    <div class="rule-section">
                        <h3>üß© ROLES EN CADA TURNO</h3>
                        <p><strong>1. Dador de pistas:</strong> Jugador activo que describe la palabra</p>
                        <p><strong>2. Adivinadores:</strong> Compa√±eros de equipo que intentan adivinar</p>
                        <p><strong>3. √Årbitros laterales:</strong> Jugadores sentados a izquierda y derecha</p>
                        <div class="warning-box">
                            <strong>‚ö†Ô∏è Importante:</strong> Los √°rbitros laterales vigilan las reglas y pueden pulsar "Error" si detectan infracciones.
                        </div>
                    </div>

                    <!-- Controles -->
                    <div class="rule-section">
                        <h3>üéÆ CONTROLES DE LA PLATAFORMA</h3>
                        <p><strong>‚úÖ CORRECTO:</strong> Tu equipo adivin√≥ la palabra (+1 acierto)</p>
                        <p><strong>‚û°Ô∏è PASAR:</strong> Saltar carta actual (m√°ximo 3 por ronda)</p>
                        <p><strong>‚ùå ERROR:</strong> Infracci√≥n detectada (termina la ronda inmediatamente)</p>
                        <p><strong>‚è∏Ô∏è PAUSA:</strong> Detener el tiempo temporalmente</p>
                        
                        <div class="shortcuts-box">
                            <strong>‚å®Ô∏è Atajos de teclado:</strong><br>
                            <strong>C</strong> = Correcto | <strong>P</strong> = Pasar | <strong>X</strong> = Error | <strong>Espacio</strong> = Pausa
                        </div>
                    </div>

                    <!-- Reglas de comunicaci√≥n -->
                    <div class="rule-section">
                        <h3>üó£Ô∏è REGLAS DE COMUNICACI√ìN</h3>
                        <div class="prohibited-box">
                            <strong>üö´ PROHIBIDO:</strong>
                            <p>‚Ä¢ Decir <strong>palabras prohibidas</strong> o sus derivados/ra√≠ces</p>
                            <p>‚Ä¢ <strong>Marcar s√≠labas</strong> con sonidos, pausas o gestos</p>
                            <p>‚Ä¢ <strong>Traducir</strong> la palabra a otro idioma</p>
                            <p>‚Ä¢ Hacer <strong>gestos o m√≠mica</strong></p>
                            <p>‚Ä¢ <strong>Deletrear</strong> la palabra o parte de ella</p>
                            <p>‚Ä¢ Incluir la palabra objetivo <strong>oculta</strong> en otra palabra</p>
                        </div>
                        
                        <div class="allowed-box">
                            <strong>‚úÖ PERMITIDO:</strong>
                            <p>‚Ä¢ Usar <strong>sin√≥nimos y definiciones</strong></p>
                            <p>‚Ä¢ Hacer <strong>rodeos descriptivos</strong></p>
                            <p>‚Ä¢ <strong>Onomatopeyas</strong> (si no est√°n prohibidas)</p>
                        </div>

                        <div class="example-box">
                            <strong>Ejemplo de infracci√≥n:</strong><br>
                            Si la palabra es "GUITARRA" (3 s√≠labas), NO puedes decir:<br>
                            <em>"Estoy tocando la... mh-mh-mh"</em> (marcando s√≠labas)
                        </div>
                    </div>

                    <!-- Tiempo y finalizaci√≥n -->
                    <div class="rule-section">
                        <h3>‚è∞ TIEMPO Y FINALIZACI√ìN</h3>
                        <p><strong>‚Ä¢ Duraci√≥n est√°ndar:</strong> 60 segundos por ronda</p>
                        <p><strong>‚Ä¢ Ronda larga:</strong> 120 segundos (casillas especiales del tablero)</p>
                        <p><strong>‚Ä¢ M√°ximo pases:</strong> 3 por ronda</p>
                        
                        <div class="warning-box">
                            <strong>‚ö†Ô∏è La ronda termina cuando:</strong><br>
                            ‚Ä¢ Se acaba el tiempo, O<br>
                            ‚Ä¢ Se pulsa "Error" (final inmediato, incluso con tiempo doble)
                        </div>
                    </div>

                    <!-- Tablero -->
                    <div class="rule-section">
                        <h3>üé≤ EL TABLERO</h3>
                        <p><strong>‚Ä¢ Avance normal:</strong> 1 carta correcta = 1 casilla</p>
                        <p><strong>‚Ä¢ Casilla Reloj ‚è±:</strong> Pr√≥xima ronda dura el doble de tiempo</p>
                        <p><strong>‚Ä¢ Zona Morada üü™:</strong> Cada 3 cartas correctas = 1 casilla</p>
                        
                        <div class="strategy-box">
                            <strong>üí° Estrategia:</strong> Aprovecha el doble tiempo justo antes de entrar en zona morada para maximizar el avance.
                        </div>
                    </div>

                    <!-- Secuencia de turno -->
                    <div class="rule-section">
                        <h3>‚ñ∂Ô∏è SECUENCIA DE UN TURNO</h3>
                        <p><strong>1.</strong> El jugador activo recibe el m√≥vil/plataforma</p>
                        <p><strong>2.</strong> Inicia la ronda (60s o 120s seg√∫n casilla)</p>
                        <p><strong>3.</strong> Da pistas respetando todas las reglas</p>
                        <p><strong>4.</strong> Usa los botones seg√∫n corresponda</p>
                        <p><strong>5.</strong> Al terminar: calcula avance y aplica efectos</p>
                        <p><strong>6.</strong> Pasa el m√≥vil a la persona de tu derecha</p>
                    </div>

                    <!-- Final -->
                    <div class="rule-section">
                        <h3>üèÅ FINAL DE LA PARTIDA</h3>
                        <p>Definan antes de empezar una de estas opciones:</p>
                        <p><strong>‚Ä¢</strong> Primer equipo en llegar a la meta</p>
                        <p><strong>‚Ä¢</strong> Jugar N rondas y ver qui√©n avanza m√°s</p>
                        <p><strong>‚Ä¢</strong> Alcanzar X n√∫mero de casillas</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Animaci√≥n de ERROR en el juego -->
        <div class="game-error-animation" id="game-error-animation">
            <div class="error-flash"></div>
            <div class="error-text-big">¬°ERROR!</div>
            <div class="error-subtitle">Ronda terminada</div>
        </div>

        <!-- Animaci√≥n de TIEMPO en el juego -->
        <div class="game-time-animation" id="game-time-animation">
            <div class="time-flash"></div>
            <div class="time-text-big">¬°TIEMPO!</div>
            <div class="time-subtitle">Ronda terminada</div>
        </div>

        <!-- Mensaje de error mejorado -->
        <div class="error-overlay" id="error-overlay">
            <div class="error-modal">
                <div class="error-icon">‚ö†Ô∏è</div>
                <div class="error-text" id="error-text"></div>
                <button class="error-close" id="error-close">Entendido</button>
            </div>
        </div>

        <!-- Indicador de carga -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="loading-spinner"></div>
            <div class="loading-text">Cargando cartas...</div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
